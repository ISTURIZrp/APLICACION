<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - LabFlow Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="light-mode">
    <div class="app-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="app-brand">
                    <i class="mdi mdi-flask-outline logo-icon"></i>
                    <h1>LabFlow</h1>
                </div>
                <button id="collapse-sidebar" class="collapse-sidebar">
                    <i class="mdi mdi-menu"></i>
                </button>
            </div>
            <div class="sidebar-content">
                <!-- El contenido del sidebar se cargará aquí desde la plantilla -->
            </div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <span>JD</span>
                    </div>
                    <div class="user-details">
                        <p class="user-name">John Doe</p>
                        <p class="user-role">Administrador</p>
                    </div>
                </div>
                <button id="logout-btn" class="logout-btn" title="Cerrar Sesión">
                    <i class="mdi mdi-logout"></i>
                </button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="page-title">
                    <h1 id="current-module-title">Dashboard</h1>
                </div>
                <div class="top-bar-actions">
                    <div class="search-container">
                        <i class="mdi mdi-magnify search-icon"></i>
                        <input type="text" placeholder="Buscar..." class="search-input">
                    </div>
                    <button id="notifications-btn" class="icon-btn" title="Notificaciones">
                        <i class="mdi mdi-bell-outline"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button id="theme-toggle" class="icon-btn" title="Cambiar tema">
                        <i class="mdi mdi-theme-light-dark"></i>
                    </button>
                </div>
            </header>

            <div class="page-container" id="page-container">
                <div id="module-content">
                    <!-- El contenido del módulo seleccionado se cargará aquí -->
                    <div class="dashboard-welcome">
                        <div class="welcome-header">
                            <h2>Bienvenido, <span id="user-name">John</span></h2>
                            <p class="welcome-date">Hoy es <span id="current-date">Lunes, 20 de Julio de 2025</span></p>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background-color: rgba(52, 152, 219, 0.1);">
                                    <i class="mdi mdi-flask" style="color: #3498db;"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>245</h3>
                                    <p>Total Insumos</p>
                                </div>
                                <div class="stat-change increase">
                                    <i class="mdi mdi-arrow-up"></i>
                                    <span>5.2%</span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="background-color: rgba(46, 204, 113, 0.1);">
                                    <i class="mdi mdi-microscope" style="color: #2ecc71;"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>32</h3>
                                    <p>Equipos Activos</p>
                                </div>
                                <div class="stat-change">
                                    <i class="mdi mdi-arrow-right"></i>
                                    <span>0%</span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="background-color: rgba(231, 76, 60, 0.1);">
                                    <i class="mdi mdi-alert-circle" style="color: #e74c3c;"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>12</h3>
                                    <p>Stock Crítico</p>
                                </div>
                                <div class="stat-change decrease">
                                    <i class="mdi mdi-arrow-down"></i>
                                    <span>3.1%</span>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="background-color: rgba(155, 89, 182, 0.1);">
                                    <i class="mdi mdi-calendar-check" style="color: #9b59b6;"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>8</h3>
                                    <p>Tareas Pendientes</p>
                                </div>
                                <div class="stat-change decrease">
                                    <i class="mdi mdi-arrow-down"></i>
                                    <span>2</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-row">
                            <div class="dashboard-card activity-card">
                                <div class="card-header">
                                    <h3>Actividad Reciente</h3>
                                    <button class="card-action-btn">
                                        <i class="mdi mdi-dots-vertical"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="activity-list">
                                        <div class="activity-item">
                                            <div class="activity-icon" style="background-color: rgba(52, 152, 219, 0.1);">
                                                <i class="mdi mdi-plus" style="color: #3498db;"></i>
                                            </div>
                                            <div class="activity-content">
                                                <p>Se agregó <strong>Metanol 99%</strong> al inventario</p>
                                                <span class="activity-time">Hace 35 minutos</span>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon" style="background-color: rgba(46, 204, 113, 0.1);">
                                                <i class="mdi mdi-check" style="color: #2ecc71;"></i>
                                            </div>
                                            <div class="activity-content">
                                                <p>Mantenimiento completado para <strong>Centrífuga #3</strong></p>
                                                <span class="activity-time">Hace 2 horas</span>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon" style="background-color: rgba(231, 76, 60, 0.1);">
                                                <i class="mdi mdi-alert" style="color: #e74c3c;"></i>
                                            </div>
                                            <div class="activity-content">
                                                <p><strong>Ácido Clorhídrico</strong> alcanzó nivel de stock crítico</p>
                                                <span class="activity-time">Hace 5 horas</span>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon" style="background-color: rgba(155, 89, 182, 0.1);">
                                                <i class="mdi mdi-calendar" style="color: #9b59b6;"></i>
                                            </div>
                                            <div class="activity-content">
                                                <p>Programado mantenimiento para <strong>Espectrofotómetro</strong></p>
                                                <span class="activity-time">Ayer, 16:42</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="view-all">Ver todas las actividades</a>
                                </div>
                            </div>
                            
                            <div class="dashboard-card chart-card">
                                <div class="card-header">
                                    <h3>Consumo de Insumos</h3>
                                    <div class="card-actions">
                                        <select class="time-selector">
                                            <option value="7">Última semana</option>
                                            <option value="30" selected>Último mes</option>
                                            <option value="90">Último trimestre</option>
                                        </select>
                                        <button class="card-action-btn">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="chart-placeholder">
                                        <!-- Aquí iría el gráfico real -->
                                        <div class="chart-image"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-row">
                            <div class="dashboard-card tasks-card">
                                <div class="card-header">
                                    <h3>Tareas Pendientes</h3>
                                    <button class="btn-sm">
                                        <i class="mdi mdi-plus"></i> Nueva Tarea
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="tasks-list">
                                        <div class="task-item">
                                            <div class="task-checkbox">
                                                <input type="checkbox" id="task1">
                                                <label for="task1"></label>
                                            </div>
                                            <div class="task-content">
                                                <p>Realizar inventario de reactivos</p>
                                                <span class="task-date">Hoy, 17:00</span>
                                            </div>
                                            <div class="task-priority high">Alta</div>
                                        </div>
                                        <div class="task-item">
                                            <div class="task-checkbox">
                                                <input type="checkbox" id="task2">
                                                <label for="task2"></label>
                                            </div>
                                            <div class="task-content">
                                                <p>Calibrar pH-metro</p>
                                                <span class="task-date">Mañana, 09:30</span>
                                            </div>
                                            <div class="task-priority medium">Media</div>
                                        </div>
                                        <div class="task-item">
                                            <div class="task-checkbox">
                                                <input type="checkbox" id="task3">
                                                <label for="task3"></label>
                                            </div>
                                            <div class="task-content">
                                                <p>Solicitar cotización de nuevos equipos</p>
                                                <span class="task-date">22 Jul, 12:00</span>
                                            </div>
                                            <div class="task-priority low">Baja</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="view-all">Ver todas las tareas</a>
                                </div>
                            </div>
                            
                            <div class="dashboard-card calendar-card">
                                <div class="card-header">
                                    <h3>Calendario</h3>
                                    <div class="card-actions">
                                        <button class="btn-sm">
                                            <i class="mdi mdi-plus"></i> Evento
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="calendar-header">
                                        <button class="calendar-nav-btn"><i class="mdi mdi-chevron-left"></i></button>
                                        <h4>Julio 2025</h4>
                                        <button class="calendar-nav-btn"><i class="mdi mdi-chevron-right"></i></button>
                                    </div>
                                    <div class="calendar-placeholder">
                                        <!-- Aquí iría el calendario real -->
                                        <div class="calendar-image"></div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="upcoming-event">
                                        <div class="event-dot" style="background-color: #3498db;"></div>
                                        <div class="event-info">
                                            <p>Auditoría de Calidad</p>
                                            <span>25 Jul, 10:00 - 12:00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-row">
                            <div class="dashboard-card stock-card">
                                <div class="card-header">
                                    <h3>Insumos en Stock Crítico</h3>
                                    <button class="card-action-btn">
                                        <i class="mdi mdi-dots-vertical"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="stock-list">
                                        <div class="stock-item">
                                            <div class="stock-info">
                                                <p class="stock-name">Ácido Clorhídrico 37%</p>
                                                <div class="stock-details">
                                                    <span class="stock-category">Reactivos</span>
                                                    <span class="stock-location">Almacén A-12</span>
                                                </div>
                                            </div>
                                            <div class="stock-level">
                                                <div class="progress-bar">
                                                    <div class="progress" style="width: 15%;"></div>
                                                </div>
                                                <div class="stock-values">
                                                    <span class="current-stock">1.5 L</span>
                                                    <span class="min-stock">Min: 10 L</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="stock-item">
                                            <div class="stock-info">
                                                <p class="stock-name">Pipetas Pasteur 3 ml</p>
                                                <div class="stock-details">
                                                    <span class="stock-category">Material de vidrio</span>
                                                    <span class="stock-location">Estante B-04</span>
                                                </div>
                                            </div>
                                            <div class="stock-level">
                                                <div class="progress-bar">
                                                    <div class="progress" style="width: 25%;"></div>
                                                </div>
                                                <div class="stock-values">
                                                    <span class="current-stock">25 u</span>
                                                    <span class="min-stock">Min: 100 u</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="stock-item">
                                            <div class="stock-info">
                                                <p class="stock-name">Etanol Absoluto</p>
                                                <div class="stock-details">
                                                    <span class="stock-category">Reactivos</span>
                                                    <span class="stock-location">Almacén A-08</span>
                                                </div>
                                            </div>
                                            <div class="stock-level">
                                                <div class="progress-bar">
                                                    <div class="progress" style="width: 35%;"></div>
                                                </div>
                                                <div class="stock-values">
                                                    <span class="current-stock">3.5 L</span>
                                                    <span class="min-stock">Min: 10 L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="insumos.html?filter=critico" class="view-all">Ver todos los insumos críticos</a>
                                </div>
                            </div>
                            
                            <div class="dashboard-card maintenance-card">
                                <div class="card-header">
                                    <h3>Próximos Mantenimientos</h3>
                                    <button class="card-action-btn">
                                        <i class="mdi mdi-dots-vertical"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="maintenance-schedule">
                                        <div class="maintenance-date">
                                            <div class="date-day">22</div>
                                            <div class="date-month">Jul</div>
                                        </div>
                                        <div class="maintenance-details">
                                            <h4>Calibración de Balanza Analítica</h4>
                                            <p>Balanza Mettler Toledo XS205</p>
                                            <div class="maintenance-meta">
                                                <span><i class="mdi mdi-account"></i> Técnico: Carlos Ramírez</span>
                                                <span><i class="mdi mdi-clock-outline"></i> 10:00 - 12:00</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="maintenance-schedule">
                                        <div class="maintenance-date">
                                            <div class="date-day">24</div>
                                            <div class="date-month">Jul</div>
                                        </div>
                                        <div class="maintenance-details">
                                            <h4>Mantenimiento Preventivo</h4>
                                            <p>Centrífuga Eppendorf 5424R</p>
                                            <div class="maintenance-meta">
                                                <span><i class="mdi mdi-account"></i> Técnico: ServiLab</span>
                                                <span><i class="mdi mdi-clock-outline"></i> 14:00 - 16:00</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="equipos.html" class="view-all">Ver todos los mantenimientos</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="notification-container" class="notification-container"></div>

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Establecer fecha actual
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const today = new Date();
        document.getElementById('current-date').textContent = today.toLocaleDateString('es-ES', options);
        
        // Evento para colapsar/expandir sidebar
        document.getElementById('collapse-sidebar').addEventListener('click', function() {
            document.querySelector('.app-container').classList.toggle('collapsed-sidebar');
        });
        
        // Cargar datos del dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Aquí se cargarían los datos reales desde Firebase
            // Este es solo un ejemplo de cómo se podría implementar
            
            // Ejemplo: Cargar estadísticas
            loadDashboardStats();
            
            // Ejemplo: Cargar actividad reciente
            loadRecentActivity();
            
            // Ejemplo: Cargar tareas pendientes
            loadPendingTasks();
            
            // Ejemplo: Cargar insumos críticos
            loadCriticalStock();
            
            // Ejemplo: Cargar próximos mantenimientos
            loadUpcomingMaintenance();
        });
        
        // Función de ejemplo para cargar estadísticas
        function loadDashboardStats() {
            // En una implementación real, estos datos vendrían de Firebase
            console.log("Cargando estadísticas del dashboard...");
        }
        
        // Función de ejemplo para cargar actividad reciente
        function loadRecentActivity() {
            // En una implementación real, estos datos vendrían de Firebase
            console.log("Cargando actividad reciente...");
        }
        
        // Función de ejemplo para cargar tareas pendientes
        function loadPendingTasks() {
            // En una implementación real, estos datos vendrían de Firebase
            console.log("Cargando tareas pendientes...");
        }
        
        // Función de ejemplo para cargar insumos críticos
        function loadCriticalStock() {
            // En una implementación real, estos datos vendrían de Firebase
            console.log("Cargando insumos en stock crítico...");
        }
        
        // Función de ejemplo para cargar próximos mantenimientos
        function loadUpcomingMaintenance() {
            // En una implementación real, estos datos vendrían de Firebase
            console.log("Cargando próximos mantenimientos...");
        }
    </script>
</body>
</html>
